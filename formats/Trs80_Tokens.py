from formats.Empty_Tokens import EmptyToken
from formats.Utility import invert_dictionary

KEYWORD = 0
FUNCTION = 1
MAXIMUM_KEYWORD = 0xcd
MAXIMUM_FUNCTION = -1


class Trs80Token(EmptyToken):
    """Converts byte codes into tokens, or more accurately de-tokenises
        a byte stream one byte at a time."""
    keyword_token_dictionary = {
        128: "END",
        129: "FOR",
        130: "RESET",
        131: "SET",
        132: "CLS",
        133: "CMD",
        134: "RANDOM",
        135: "NEXT",
        136: "DATA",
        137: "INPUT",
        138: "DIM",
        139: "READ",
        140: "LET",
        141: "GOTO",
        142: "RUN",
        143: "IF",
        144: "RESTORE",
        145: "GOSUB",
        146: "RETURN",
        147: "REM",
        148: "STOP",
        149: "ELSE",
        150: "TRON",
        151: "TROFF",
        152: "DEFSTR",
        153: "DEFINT",
        154: "DEFSNG",
        155: "DEFDBL",
        156: "LINE",
        157: "EDIT",
        158: "ERROR",
        159: "RESUME",
        160: "OUT",
        161: "ON",
        162: "OPEN",
        163: "FIELD",
        164: "GET",
        165: "PUT",
        166: "CLOSE",
        167: "LOAD",
        168: "MERGE",
        169: "NAME",
        170: "KILL",
        171: "LSET",
        172: "RSET",
        173: "SAVE",
        174: "SYSTEM",
        175: "LPRINT",
        176: "DEF",
        177: "POKE",
        178: "PRINT",
        179: "CONT",
        180: "LIST",
        181: "LLIST",
        182: "DELETE",
        183: "AUTO",
        184: "CLEAR",
        185: "CLOAD",
        186: "CSAVE",
        187: "NEW",
        188: "TAB",
        189: "TO",
        190: "FN",
        191: "USING",
        192: "VARPTR",
        193: "USR",
        194: "ERL",
        195: "ERR",
        196: "STRING$",
        197: "INSTR",
        198: "POINT",
        199: "TIME$",
        200: "MEM",
        201: "INKEY$",
        202: "THEN",
        203: "NOT",
        204: "STEP",
        205: "+",
        206: "-",
        207: "*",
        208: "/",
        209: "^",
        210: "AND",
        211: "OR",
        212: ">",
        213: "=",
        214: "<",
        215: "SGN",
        216: "INT",
        217: "ABS",
        218: "FRE",
        219: "INP",
        220: "POS",
        221: "SQR",
        222: "RND",
        223: "LOG",
        224: "EXP",
        225: "COS",
        226: "SIN",
        227: "TAN",
        228: "ATN",
        229: "PEEK",
        230: "CVI",
        231: "CVS",
        232: "CVD",
        233: "EOF",
        234: "LOC",
        235: "LOF",
        236: "MKI$",
        237: "MKS$",
        238: "MKD$",
        239: "CINT",
        240: "CSNG",
        241: "CDBL",
        242: "FIX",
        243: "LEN",
        244: "STR$",
        245: "VAL",
        246: "ASC",
        247: "CHR$",
        248: "LEFT$",
        249: "RIGHT$",
        250: "MID$",
        251: "'"
    }

    def __init__(self):
        super().__init__()
        self.max_keyword = MAXIMUM_KEYWORD
        self.max_function = MAXIMUM_FUNCTION
        self.name = "TRS80 Basic II Tokens"
        self.keyword_dictionary = invert_dictionary(
            self.keyword_token_dictionary)
        self.function_dictionary = {}
